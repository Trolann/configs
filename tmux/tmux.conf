# tmux keybindings aligned with WezTerm / i3 / GlazeWM
# Same vim keys (h/j/k/l, \), just behind tmux prefix (Ctrl+b)
#
# Action           | WezTerm              | tmux (Ctrl+b, then...)
# -----------------+----------------------+-----------------------
# Split vertical   | Ctrl+\               | prefix \
# Split horizontal | Ctrl+Alt+\           | prefix -
# Navigate pane    | Ctrl+Shift+h/j/k/l   | prefix h/j/k/l
# Resize pane      | Ctrl+Shift+Alt+hjkl  | prefix H/J/K/L
# New tab          | Ctrl+t               | prefix c
# Next/prev tab    | Ctrl+Tab             | prefix n / prefix p
# Copy mode        | Ctrl+x               | prefix [
# Paste            | Ctrl+Shift+v         | prefix ]

set-option -sa terminal-overrides ",xterm*:Tc"
set-option -sg escape-time 10
set-option -a terminal-features 'tmux256-color:RGB'
set -g mouse on

# Start windows and panes at 1, not 0
set -g base-index 1
set -g pane-base-index 1
set-window-option -g pane-base-index 1
set-option -g renumber-windows on

# Splits — \ and - (same key as WezTerm, just prefixed)
bind \\ split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"

# Navigate panes — h/j/k/l
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Resize panes — H/J/K/L (repeatable)
bind -r H resize-pane -L 2
bind -r J resize-pane -D 2
bind -r K resize-pane -U 2
bind -r L resize-pane -R 2

# vi copy mode
set-window-option -g mode-keys vi

# Sync panes toggle
bind S setw synchronize-panes

# Machine-specific overrides (not tracked in git)
if-shell "[ -f ~/.tmux.local.conf ]" "source-file ~/.tmux.local.conf"

# Theme
set -g @catppuccin_flavour 'mocha'

# Plugins
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'dreamsofcode-io/catppuccin-tmux'
set -g @plugin 'tmux-plugins/tmux-yank'

run '~/.tmux/plugins/tpm/tpm'
